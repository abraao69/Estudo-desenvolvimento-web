<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Async / Await - ES8</title>
</head>
<body>

	<script>

		let processoAssincrono = new Promise((resolve, reject) => {

			setTimeout(() => resolve('Sucesso no processo assíncrono'), 3000)
		})

		async function recuperarDados() {

			await processoAssincrono.then(pa => console.log(pa));
			console.log('Processamento assíncrono 1');

			// Recuperando os dados de uma API fake
			await fetch('https://jsonplaceholder.typicode.com/posts')
				.then(response => response.json())
				.then(data => console.log('Posts: ', data))

			console.log('Processamento assíncrono 2');

			await fetch('https://jsonplaceholder.typicode.com/comments')
				.then(response => response.json())
				.then(data => console.log('Comentários: ', data))

			console.log('Processamento assíncrono 3');

			return 'Fim do processamento';
		}

		recuperarDados().then(msgFinish => console.log(msgFinish));
		

	</script>
	
</body>
</html>
